define(["fernsworld","jquery","underscore","backbone","hbs","../models/models","../collections/collections"],function(a,b,c,d,e,f,g){return a.Views.Contact=d.View.extend({el:"#addContact",events:{"click #submit":"saveContact"},initialize:function(){var b=this;b.collection=a.Collections.ContactCollections,b.collection.on("add",b.render,this)},saveContact:function(d){d.preventDefault(),this.model=new a.Models.Contact,this.model.on("error",this.modelError,this),this.model.on("change",this.modelChange,this);var e=b(d.currentTarget).parent().serializeArray(),f={person:{}};return c.each(e,function(a){f.person[c.values(a)[0]]=c.values(a)[1]}),b(d.currentTarget).parent().children("input").val(""),this.model.set(f)},modelError:function(a,b){console.log(a,b,this)},modelChange:function(b){a.Collections.ContactCollections.add(b)},render:function(){a.Views.contactList.render()}}),a.Views.ContactList=d.View.extend({el:"#listContacts",initialize:function(){var b=this;b.collection.on("reset",b.render,this),a.Templates.contactView?b.collection.fetch():require(["hbs!templates/contact"],function(c){a.Templates.contactView=c,b.collection.fetch()})},render:function(){var b=this;b.$el.empty(),c.each(b.collection.models,function(c){b.$el.append(a.Templates.contactView(c.attributes.person))})}}),a})